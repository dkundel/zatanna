/*! zatanna 2016-06-03 */
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(a,b,c){var d=a||"";if(d){if(d.indexOf(",")>0){var e=d.indexOf(","),f=d.slice(e+1),g=d.slice(0,e);d=f+" "+g}d=d.toLowerCase(),d=d.replace(/[.'"]/gi," "),d=d.replace(/\s{2,}/g," ")}this.DEBUG=b||!1,this.DEBUG_AREA=c,this.nameSource=d,this.nameSourceLength=this.nameSource.length+1,this.nameSourceScore=0,this._reset()}d.prototype={_reset:function(a){var b=a||"";b&&(b=b.toLowerCase(),b=b.replace(/[.,'"]/gi,""),b=b.replace(/\s{2,}/g," ")),this.nameTarget=b,this.nameTargetLength=this.nameTarget.length+1,this.nameTargetScore=0,this.dynamicMatrix=[],this.maxMatrixValue=0,this.overallScore=0,this.finalScore=0},characterMatrix:["a0004000000000400000000000","0a000000000000000000000000","00a00000004000002000000000","000a0000000000000002000000","4000a000000000000000000020","00000a00000000020000020000","000000a0000000000000000000","0000000a040000000000000000","00000000a20400000000000020","000000042a0000000000000040","0040000000a000002000000000","00000000400a00000000000000","000000000000a4000000000000","0000000000004a000000000000","40000000000000a00000000000","000002000000000a0000000000","0020000000200000a000000000","00000000000000000a00000000","000000000000000000a0000000","0002000000000000000a000000","00000000000000000000a00000","000002000000000000000a4000","0000000000000000000004a000","00000000000000000000000a00","000020002400000000000000a0","0000000000000000002000000a","00000000000000400000000000","00000000400400000000000000","00000000000000000100000002","00002000000000000000000001","20000002000000000000000000","00000000000000000020000000","01000010000000000000000000","00000000100100000002000000","01000000000000000000000000","00000020000000000000000000"],charMatrixDictionary:{a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7,i:8,j:9,k:10,l:11,m:12,n:13,o:14,p:15,q:16,r:17,s:18,t:19,u:20,v:21,w:22,x:23,y:24,z:25,0:26,1:27,2:28,3:29,4:30,5:31,6:32,7:33,8:34,9:35},_characterScore:function(a,b){var c=10,d=0,e=-4,f=0,g=0,h=0;return a&&b?a==b?c:(f=this.charMatrixDictionary[a],g=this.charMatrixDictionary[b],f&&g?(d=this.characterMatrix[f][g],h=parseInt(d,16),h?h:e):e):e},_gappedScore:function(a,b){var c=-3,d=-4;return" "==a||" "==b?c:d},_transposedScore:function(a,b){var c=-2;return c},_buildMatrix:function(){for(var a=[],b="",c="",d=0,e=0;e<this.nameTargetLength;e++)a.push(0);for(var f=0;f<this.nameSourceLength;f++)this.dynamicMatrix.push(a.slice(0));for(var f=1;f<this.nameSourceLength;f++)for(var e=1;e<this.nameTargetLength;e++)b=this.nameSource[f-1],c=this.nameTarget[e-1],d=this._gappedScore(b,c),this.dynamicMatrix[f][e]=Math.max(this.dynamicMatrix[f-1][e-1]+this._characterScore(b,c),0,this.dynamicMatrix[f-1][e]+d,this.dynamicMatrix[f][e-1]+d),this.dynamicMatrix[f-1][e]>this.dynamicMatrix[f-1][e-1]&&this.dynamicMatrix[f][e-1]>this.dynamicMatrix[f-1][e-1]&&(this.dynamicMatrix[f-1][e-1]=Math.max(this.dynamicMatrix[f-1][e],this.dynamicMatrix[f][e-1]),this.dynamicMatrix[f][e]=Math.max(this.dynamicMatrix[f-1][e-1]+this._transposedScore(b,c),this.dynamicMatrix[f][e]))},_backtrack:function(){for(var a=0,b=0,c=this.nameTargetLength-1;c>0&&(this.dynamicMatrix[this.nameSourceLength-1][c]>a&&(a=this.dynamicMatrix[this.nameSourceLength-1][c],b=c),!(a>0&&0==this.dynamicMatrix[this.nameSourceLength-1][c+1]));c--);if(0>=a)return!1;for(var c=b,d=this.nameSourceLength-1,e=0,f=0,g=0;d>0&&c>0;)this.dynamicMatrix[d][c]>this.maxMatrixValue&&(this.maxMatrixValue=this.dynamicMatrix[d][c]),this.DEBUG&&$("#"+this.DEBUG_AC+"-"+(d+1)+"-"+(c+1)).css("background-color","#ccc"),e=this.dynamicMatrix[d-1][c-1],f=this.dynamicMatrix[d][c-1],g=this.dynamicMatrix[d-1][c],e>=f&&e>=g?(d--,c--):f>=e&&f>=g?c--:g>=e&&g>=f&&d--,0==e&&0==f&&0==g&&(d=0,c=0);return!0},_finalMatchScore:function(){var a=(this.nameSourceLength+this.nameTargetLength)/2;this.overallScore=2*this.maxMatrixValue/a,this.finalScore=this.overallScore/10},_debug_ShowDVtable:function(){var a=0,b="";DEBUG_AC=Math.round(9999*Math.random()),this.DEBUG_AC=DEBUG_AC,b+='<table class="example">';for(var c=0;c<=this.nameSourceLength;c++){b+="<tr>";for(var d=0;d<=this.nameTargetLength;d++)0==c?b+=d>1?'<td id="'+DEBUG_AC+"-"+c+"-"+d+'">'+this.nameTarget[d-2]+"</td>":'<td id="'+DEBUG_AC+"-"+c+"-"+d+'"></td>':d>0?(a=Math.round(100*this.dynamicMatrix[c-1][d-1])/100,b+='<td id="'+DEBUG_AC+"-"+c+"-"+d+'">'+a+"</td>"):b+=c>1?'<td id="'+DEBUG_AC+"-"+c+"-"+d+'">'+this.nameSource[c-2]+"</td>":'<td id="'+DEBUG_AC+"-"+c+"-"+d+'"></td>';b+="</tr>"}b+="</table>",$(this.DEBUG_AREA).append(b)},score:function(a){return this._reset(a),this._buildMatrix(),this.DEBUG&&this._debug_ShowDVtable(),this._backtrack(),this._finalMatchScore(),this.finalScore},topMatchesFromArray:function(a,b){for(var c=0,d=b||10,e=[],f=0;d>f;++f)e.push({v:0,n:"-"});for(var f=0;f<a.length;f++)if(c=this.score(allNames[f]),c>e[d-1].v){newObj={v:c,n:a[f]},tmpObj={v:0,n:""};for(var g=0;d>g;++g)newObj.v>e[g].v&&(tmpObj.v=e[g].v,tmpObj.n=e[g].n,e[g].v=newObj.v,e[g].n=newObj.n,newObj.v=tmpObj.v,newObj.n=tmpObj.n)}for(var f=0;f<e.length;f++)tmp=e[f],e[f]=tmp.n;return e}},b.exports.fuzziac=d},{}],2:[function(a,b,c){(function(){var c,d,e,f,g,h,i=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};g=a("fuzzaldrin").score,f=/\r\n|[\n\r\u2028\u2029]/g,e=/[\.a-zA-Z_0-9\$\-\u00A2-\uFFFF]/,c=a("../../assets/fuzziac.js"),b.exports=function(a,b){var f,g,j;return f=ace.require("ace/range").Range,j=ace.require("ace/autocomplete/util"),g=a.insertSnippet,a.insertSnippet=function(a,d){var h,i,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M;if(m=a.getCursorPosition(),s=a.session.getLine(m.row),m.column>0&&(z=j.retrievePrecedingIdentifier(s,m.column-1,e),z.length>0))if(A=d.toLowerCase().indexOf(z.toLowerCase()),0===A)B=new f(m.row,m.column-1-z.length,m.row,m.column),a.session.remove(B);else{for(J=a.completers,F=0,H=J.length;H>F;F++)if(k=J[F],null!=k.completions){for(K=k.completions,G=0,I=K.length;I>G;G++)if(l=K[G],l.snippet===d){u=l;break}if(u)break}if(null!=u&&(r=null!=(L=a.session.getMode())&&null!=(M=L.$id)?M.substr("ace/mode/".length):void 0,n=1,null!=b[r]&&(n+=b[r].length),w=(C=u.content.indexOf(d.substr(0,d.length-n)))?u.content.substring(0,C):"",D=m.column-w.length,D>0&&D<=s.length))if(o=D-1,"."===s[o]){if(v=u.content.substring(0,u.content.indexOf(".")),y=o-1,y>=0&&/\w/.test(s[y])){for(;y>=0&&/\w/.test(s[y]);)y--;(0>y||!/\w/.test(s[y]))&&y++,x=s.substring(y,o),q=new c.fuzziac(v),p=0,q&&(p=q.score(x)),p>.5?(B=new f(m.row,y,m.row,D),a.session.remove(B)):/^[^.]+\./.test(d)&&(d=d.replace(/^[^.]+\./,""))}}else if(/\w/.test(s[o])){for(;o>=0&&/\w/.test(s[o]);)o--;(0>o||!/\w/.test(s[o]))&&o++,B=new f(m.row,o,m.row,D),a.session.remove(B)}}return h=m.column,E=s.substring(h),t=E.match(/^[a-zA-Z_0-9]*(\(\s*\))?/),t&&(h+=t[0].length),i=new f(m.row,m.column,m.row,h),a.session.remove(i),g.call(this,a,d)},{getCompletions:function(c,e,f,g,j){var k,l,m,n,o,p,q,r,s,t;return m=null!=(q=e.getMode())&&null!=(r=q.$id)?r.substr("ace/mode/".length):void 0,n=e.getLine(f.row),l=null!=(s=e.getMode())&&null!=(t=s.$highlightRules)?t.$keywordList:void 0,l&&i.call(l,g)>=0?(this.completions=[],j(null,this.completions)):(p=d(e,f),o=a.snippetMap,k=[],a.getActiveScopes(c).forEach(function(a){var c,d,e,i,j,l,p,q,r,s;for(j=o[a]||[],s=[],l=0,p=j.length;p>l;l++)e=j[l],c=e.name||e.tabTrigger,c&&(q=h(e.content,c,n,g,f,m,b,e.captureReturn),i=q[0],d=q[1],s.push(k.push({content:e.content,caption:c,snippet:i,score:null!=(r=d*e.importance)?r:1,meta:e.meta||(e.tabTrigger&&!e.name?e.tabTrigger+"â‡¥":"snippets")})));return s},this),this.completions=k,j(null,k))}}},d=function(a,b){var c,d,e;for(c=b.column,d=c-1,e=a.getLine(b.row);d>=0&&!e[d].match(/\s+|[\.\@]/);)d--;return d>=0&&d++,e.substring(d,c)},h=function(a,b,c,d,e,h,i,j){var k,l,m,n,o,p,q,r,s,t,u,v;if(l=.1,p=a.toLowerCase().indexOf(d.toLowerCase())>-1){if(q=(a.match(f)||[]).length,k=a.indexOf(b),r=a.substring(0,k),t=a.substring(r.length+b.length),n=e.column-d.length-1,n>=0&&r.length>0&&c[n]===r[r.length-1]){for(s=r.length-1;c[n]===r[s]&&0!==n&&0!==s;)n--,s--;m=c.substr(n,e.column-d.length-n)}else m="";o=c.substr(e.column,t.length-1+b.length-d.length+1),a.indexOf(o)<0&&(o=""),e.column-d.length>=0&&"("===c[e.column-d.length-1]&&e.column<c.length&&")"===c[e.column]&&")"===o&&(o=""),l+=g(a,m+d+o),r.length>0&&r===m&&(a=a.slice(r.length)),o.length>0&&(a=a.slice(0,a.length-o.length)),0===o.length&&/^\s*$/.test(c.slice(e.column))&&(v=c.substring(0,n),(0>n||n>=0&&!/[\(\)]/.test(v)&&!/^[ \t]*(?:if\b|elif\b)/.test(v))&&(0===q&&i[h]&&(a+=i[h]),0!==q||/\$\{/.test(a)||(a+="\n"),j&&/^\s*$/.test(v)&&(a=j+m+a)))}else l+=g(a,d);return u=function(a,b,c){return c=c||0,a.substr(c,b.length)===b},u(b,d)&&(l*=2),l-=b.length/500,b===d&&(l=10),[a,l]}}).call(this)},{"../../assets/fuzziac.js":1,fuzzaldrin:8}],3:[function(a,b,c){(function(){var c,d,e,f=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};d=a("fuzzaldrin"),e=/[^a-zA-Z_0-9\$\-\u00C0-\u1FFF\u2C00-\uD7FF\w]+/,b.exports=function(a,b,g){var h,i,j,k;return h=ace.require("ace/range").Range,i=[],k=function(d){var e,f,g,h,j,k,l,m;for(b.setDocument(a.getSession().getDocument()),e=[],f=d.data.last,g=k=0;f>=0?f>k:k>f;g=f>=0?++k:--k)for(j=b.getTokens(g),l=0,m=j.length;m>l;l++)h=j[l],c(h)&&(/^@/.test(h.value)&&(h.value=h.value.substring(1)),e.push({caption:h.value,value:h.value,meta:"press enter"}));return i=_.uniq(e,function(a){return a.value})},b.on("update",k),j=function(a,b){var c,d;return d=a.getTextRange(h.fromPoints({row:0,column:0},b)),c=a.getValue(),c=c.substr(d.length),c.split(e)[0]},{getCompletions:function(a,b,c,e,h){var k,l,m,n,o,p,q,r,s;for(l=[],m=b.getLength(),q=j(b,c),l=d.filter(i,q,{key:"value"}),null!=(null!=g?g.completions:void 0)&&(o=g.completions.map(function(a){return a.caption}),l=function(){var a,b,c,d;for(d=[],a=0,b=l.length;b>a;a++)k=l[a],c=k.caption,f.call(o,c)<0&&d.push(k);return d}()),l=function(){var a,b,c;for(c=[],a=0,b=l.length;b>a;a++)k=l[a],"var"!==k.caption&&c.push(k);return c}(),r=0,s=l.length;s>r;r++)p=l[r],p.caption,n=d.score(p.value,q),n*=.7,p.score=n;return h(null,l)}}},c=function(a){var b,c;return b=function(b){return 0===a.type.indexOf(b)},c=b("constant")&&!b("constant.numeric"),c=c||b("identifier"),c=c||b("variable"),c=c||b("keyword"),c=c||b("storage")}}).call(this)},{fuzzaldrin:8}],4:[function(a,b,c){(function(){var a;b.exports=a={autoLineEndings:{},basic:!0,snippetsLangDefaults:!0,liveCompletion:!0,language:"javascript",languagePrefixes:"this.,@,self.",completers:{keywords:!0,snippets:!0,text:!0}}}).call(this)},{}],5:[function(a,b,c){(function(){var c;c=a("tv4/tv4").tv4,b.exports=function(a){return c.validateMultiple(a,{type:"object",additionalProperties:!1,properties:{autoLineEndings:{type:"object",required:!1,description:"Mapping ace mode language to line endings to automatically insert.  E.g. javacscript: ';'"},basic:{type:"boolean",required:!1,description:"Basic autocompletion based on keywords used in code"},snippets:{type:"boolean",required:!1,description:"Offers code snippets for autocomplete"},snippetsLangDefaults:{type:"boolean",required:!1,description:"If true, use language default snippets"},liveCompletion:{type:"boolean",required:!1,description:"Triggers autocomplete while typing"},language:{type:"string",required:!1,description:"Language to load default snippets"},languagePrefixes:{type:"string",required:!1,description:"Language prefixes that should be removed for snippets"},completers:{type:"object",additionalProperties:!1,properties:{snippets:{type:"boolean",required:!1,description:"Show snippets suggestions in autocomplete popup"},keywords:{type:"boolean",required:!1,description:"Show keywords suggestions in autocomplete popup"},text:{type:"boolean",required:!1,description:"Show text content suggestions in autocomplete popup"}}},popupFontSizePx:{type:"number",required:!1,description:"Font-size in pixels for popup text"},popupLineHeightPx:{type:"number",required:!1,description:"Line-height in pixels for popup text"},popupWidthPx:{type:"number",required:!1,description:"Width in pixels for popup"}}})}}).call(this)},{"tv4/tv4":13}],6:[function(a,b,c){(function(){var c,d,e,f=function(a,b){return function(){return a.apply(b,arguments)}};d=a("./defaults"),e=a("./validators/options"),b.exports=c=function(){function b(a,b){this.doLiveCompletion=f(this.doLiveCompletion,this);var h,i,j;if(g=ace.require("ace/tokenizer").Tokenizer,c=ace.require("ace/background_tokenizer").BackgroundTokenizer,this.editor=a,h=ace.require("ace/config"),null==b&&(b={}),i=_.extend({},d),this.options=_.merge(i,b),j=e(this.options),!j.valid)throw new Error("Invalid Zatanna options: "+JSON.stringify(j.errors,null,4));ace.config.loadModule("ace/ext/language_tools",function(a){return function(){var b,d,e;return a.snippetManager=ace.require("ace/snippets").snippetManager,a.snippetManager.expandWithTab=function(){return!1},d=new(a.editor.getSession().getMode().HighlightRules),e=new g(d.getRules()),a.bgTokenizer=new c(e,a.editor),b=a.editor.getSession().getDocument(),a.bgTokenizer.setDocument(b),a.bgTokenizer.start(0),a.setAceOptions(),a.copyCompleters(),a.activateCompleter(),a.editor.commands.on("afterExec",a.doLiveCompletion)}}(this))}var c,g;return g="",c="",b.prototype.setAceOptions=function(){var a,b;return a={enableLiveAutocompletion:this.options.liveCompletion,enableBasicAutocompletion:this.options.basic,enableSnippets:this.options.completers.snippets},this.editor.setOptions(a),null!=(b=this.editor.completer)?b.autoSelect=!0:void 0},b.prototype.copyCompleters=function(){var b;return this.completers={snippets:{},text:{},keywords:{}},null!=this.editor.completers&&(b=this.editor.completers,this.completers.snippets.comp=b[0],this.completers.text.comp=b[1],this.completers.keywords.comp=b[2]),this.options.completers.snippets&&(this.completers.snippets={pos:0},this.completers.snippets.comp=a("./completers/snippets")(this.snippetManager,this.options.autoLineEndings)),this.options.completers.text&&(this.completers.text={pos:1},this.completers.text.comp=a("./completers/text")(this.editor,this.bgTokenizer,this.completers.snippets.comp)),this.options.completers.keywords?this.completers.keywords={pos:2}:void 0},b.prototype.activateCompleter=function(a){var b,c,d,e;if(Array.isArray(a))return this.editor.completers=a;if("string"!=typeof a){this.editor.completers=[],d=this.completers,e=[];for(c in d)b=d[c],this.options.completers[c]===!0?e.push(this.activateCompleter(c)):e.push(void 0);return e}return null!=this.completers[a]&&this.editor.completers[this.completers[a].pos]!==this.completers[a].comp?this.editor.completers.splice(this.completers[a].pos,0,this.completers[a].comp):void 0},b.prototype.addSnippets=function(a,b){return this.options.language=b,ace.config.loadModule("ace/ext/language_tools",function(c){return function(){var d;return c.snippetManager=ace.require("ace/snippets").snippetManager,d="ace/snippets/"+b,ace.config.loadModule(d,function(d){var e,f,g,h;if(null!=d){for(c.snippetManager.files[b]=d,(null!=(h=d.snippets)?h.length:void 0)>0&&c.snippetManager.unregister(d.snippets),null!=c.oldSnippets&&c.snippetManager.unregister(c.oldSnippets),d.snippets=c.options.snippetsLangDefaults?c.snippetManager.parseSnippetFile(d.snippetText):[],f=0,g=a.length;g>f;f++)e=a[f],d.snippets.push(e);return c.snippetManager.register(d.snippets),c.oldSnippets=d.snippets}})}}(this))},b.prototype.setLiveCompletion=function(a){return a===!0||a===!1?(this.options.liveCompletion=a,this.setAceOptions()):void 0},b.prototype.set=function(a,b){switch(a){case"snippets":if("boolean"!=typeof b)return;this.options.completers.snippets=b,this.setAceOptions(),this.activateCompleter("snippets");break;case"basic":if("boolean"!=typeof b)return;this.options.basic=b,this.setAceOptions(),this.activateCompleter();break;case"liveCompletion":if("boolean"!=typeof b)return;this.options.liveCompletion=b,this.setAceOptions(),this.activateCompleter();break;case"language":if("string"!=typeof b)return;this.options.language=b,this.setAceOptions(),this.activateCompleter();break;case"completers.keywords":if("boolean"!=typeof b)return;this.options.completers.keywords=b,this.activateCompleter();break;case"completers.text":if("boolean"!=typeof b)return;this.options.completers.text=b,this.activateCompleter()}},b.prototype.on=function(){return this.paused=!1},b.prototype.off=function(){return this.paused=!0},b.prototype.doLiveCompletion=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;if((this.options.basic||this.options.liveCompletion||this.options.completers.snippets||this.options.completers.text)&&!this.paused)return c=c||ace.require("ace/token_iterator").TokenIterator,d=a.editor,i=a.args||"",f=d.completer&&d.completer.activated,("backspace"===a.command.name||"insertstring"===a.command.name)&&(g=d.getCursorPosition(),j=new c(d.getSession(),g.row,g.column).getCurrentToken(),null!=j&&"comment"!==(l=j.type)&&"string"!==l&&(h=this.getCompletionPrefix(d),f&&null!=(m=d.completer)&&m.detach(),h&&(d.completer||(b=ace.require("ace/autocomplete").Autocomplete,null!=(null!=b&&null!=(n=b.prototype)?n.commands:void 0)&&(e=function(a){return function(b){return b.completer.detach(),a.editor.insert("\n")}}(this),b.prototype.commands["Shift-Return"]=e),d.completer=new b),d.completer.autoSelect=!0,d.completer.autoInsert=!1,d.completer.showPopup(d),(null!=(o=d.completer)&&null!=(p=o.completions)&&null!=(q=p.filtered)?q.length:void 0)>10?d.completer.detach():null!=d.completer.popup&&($(".ace_autocomplete").find(".ace_content").css("cursor","pointer"),null!=this.options.popupFontSizePx&&$(".ace_autocomplete").css("font-size",this.options.popupFontSizePx+"px"),null!=this.options.popupLineHeightPx&&$(".ace_autocomplete").css("line-height",this.options.popupLineHeightPx+"px"),null!=this.options.popupWidthPx&&$(".ace_autocomplete").css("width",this.options.popupWidthPx+"px"),"function"==typeof(k=d.completer.popup).resize&&k.resize())))),!this.options.completers.text||"backspace"!==(r=a.command.name)&&"del"!==r&&"insertstring"!==r&&"removetolinestart"!==r&&"Enter"!==r&&"Return"!==r&&"Space"!==r&&"Tab"!==r?void 0:this.bgTokenizer.fireUpdateEvent(0,this.editor.getSession().getLength())},b.prototype.getCompletionPrefix=function(a){var b,c,d,e,f;return e=e||ace.require("ace/autocomplete/util"),c=a.getCursorPosition(),b=a.session.getLine(c.row),d=null,null!=(f=a.completers)&&f.forEach(function(a){return(null!=a?a.identifierRegexps:void 0)?a.identifierRegexps.forEach(function(a){return!d&&a?d=e.retrievePrecedingIdentifier(b,c.column,a):void 0}):void 0}),null==d&&(d=e.retrievePrecedingIdentifier(b,c.column)),d},b}(),"undefined"!=typeof self&&null!==self&&(self.Zatanna=c),"undefined"!=typeof window&&null!==window&&(window.Zatanna=c)}).call(this)},{"./completers/snippets":2,"./completers/text":3,"./defaults":4,"./validators/options":5}],7:[function(a,b,c){(function(){var c,d,e;d=a("./scorer"),c=function(a){return a.candidate},e=function(a,b){return b.score-a.score},b.exports=function(a,b,f,g){var h,i,j,k,l,m,n,o,p;if(p=null!=g?g:{},i=p.key,j=p.maxResults,b){for(l=[],n=0,o=a.length;o>n;n++)h=a[n],m=null!=i?h[i]:h,m&&(k=d.score(m,b,f),f||(k=d.basenameScore(m,b,k)),k>0&&l.push({candidate:h,score:k}));l.sort(e),a=l.map(c)}return null!=j&&(a=a.slice(0,j)),a}}).call(this)},{"./scorer":10}],8:[function(a,b,c){(function(){var c,d,e,f,g;g=a("./scorer"),e=a("./filter"),f=a("./matcher"),c=a("path").sep,d=/\ /g,b.exports={filter:function(a,b,f){var g;return b&&(g=-1!==b.indexOf(c),b=b.replace(d,"")),e(a,b,g,f)},score:function(a,b){var e,f;return a&&b?a===b?2:(e=-1!==b.indexOf(c),b=b.replace(d,""),f=g.score(a,b),e||(f=g.basenameScore(a,b,f)),f):0},match:function(a,b){var e,g,h,i,j,k;if(!a)return[];if(!b)return[];if(a===b)return function(){k=[];for(var b=0,c=a.length;c>=0?c>b:b>c;c>=0?b++:b--)k.push(b);return k}.apply(this);if(i=-1!==b.indexOf(c),b=b.replace(d,""),h=f.match(a,b),!i)for(e=f.basenameMatch(a,b),h=h.concat(e).sort(function(a,b){return a-b}),j=null,g=0;g<h.length;)g&&j===h[g]?h.splice(g,1):(j=h[g],g++);return h}}}).call(this)},{"./filter":7,"./matcher":9,"./scorer":10,path:11}],9:[function(a,b,c){(function(){var b;b=a("path").sep,c.basenameMatch=function(a,d){var e,f,g,h;for(f=a.length-1;a[f]===b;)f--;for(h=0,g=f,e=null;f>=0;)a[f]===b?(h++,null==e&&(e=a.substring(f+1,g+1))):0===f&&(g<a.length-1?null==e&&(e=a.substring(0,g+1)):null==e&&(e=a)),f--;return c.match(e,d,a.length-e.length)},c.match=function(a,b,c){var d,e,f,g,h,i,j,k,l,m;if(null==c&&(c=0),a===b)return function(){m=[];for(var b=c,d=c+a.length;d>=c?d>b:b>d;d>=c?b++:b--)m.push(b);return m}.apply(this);for(j=b.length,k=a.length,e=0,f=0,h=[];j>e;){if(d=b[e++],g=a.indexOf(d.toLowerCase()),l=a.indexOf(d.toUpperCase()),i=Math.min(g,l),-1===i&&(i=Math.max(g,l)),f=i,-1===f)return[];h.push(c+f),c+=f+1,a=a.substring(f+1,k)}return h}}).call(this)},{path:11}],10:[function(a,b,c){(function(){var b,d;b=a("path").sep,c.basenameScore=function(a,d,e){var f,g,h,i,j,k;for(h=a.length-1;a[h]===b;)h--;for(k=0,i=h,f=null;h>=0;)a[h]===b?(k++,null==f&&(f=a.substring(h+1,i+1))):0===h&&(i<a.length-1?null==f&&(f=a.substring(0,i+1)):null==f&&(f=a)),h--;return f===a?e*=2:f&&(e+=c.score(f,d)),j=k+1,g=Math.max(1,10-j),e*=.01*g},c.score=function(a,c){var e,f,g,h,i,j,k,l,m,n,o,p;if(a===c)return 1;if(d(a,c))return 1;for(n=0,k=c.length,m=a.length,g=0,h=0;k>g;){if(e=c[g++],i=a.indexOf(e.toLowerCase()),o=a.indexOf(e.toUpperCase()),j=Math.min(i,o),-1===j&&(j=Math.max(i,o)),h=j,-1===h)return 0;f=.1,a[h]===e&&(f+=.1),0===h||a[h-1]===b?f+=.8:("-"===(p=a[h-1])||"_"===p||" "===p)&&(f+=.7),a=a.substring(h+1,m),n+=f}return l=n/k,(l*(k/m)+l)/2},d=function(a,c){return a[a.length-c.length-1]===b?a.lastIndexOf(c)===a.length-c.length:void 0}}).call(this)},{path:11}],11:[function(a,b,c){(function(a){function b(a,b){for(var c=0,d=a.length-1;d>=0;d--){var e=a[d];"."===e?a.splice(d,1):".."===e?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c--;c)a.unshift("..");return a}function d(a,b){if(a.filter)return a.filter(b);for(var c=[],d=0;d<a.length;d++)b(a[d],d,a)&&c.push(a[d]);return c}var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,f=function(a){return e.exec(a).slice(1)};c.resolve=function(){for(var c="",e=!1,f=arguments.length-1;f>=-1&&!e;f--){var g=f>=0?arguments[f]:a.cwd();if("string"!=typeof g)throw new TypeError("Arguments to path.resolve must be strings");g&&(c=g+"/"+c,e="/"===g.charAt(0))}return c=b(d(c.split("/"),function(a){return!!a}),!e).join("/"),(e?"/":"")+c||"."},c.normalize=function(a){var e=c.isAbsolute(a),f="/"===g(a,-1);return a=b(d(a.split("/"),function(a){return!!a}),!e).join("/"),a||e||(a="."),a&&f&&(a+="/"),(e?"/":"")+a},c.isAbsolute=function(a){return"/"===a.charAt(0)},c.join=function(){var a=Array.prototype.slice.call(arguments,0);return c.normalize(d(a,function(a,b){if("string"!=typeof a)throw new TypeError("Arguments to path.join must be strings");return a}).join("/"))},c.relative=function(a,b){function d(a){for(var b=0;b<a.length&&""===a[b];b++);for(var c=a.length-1;c>=0&&""===a[c];c--);return b>c?[]:a.slice(b,c-b+1)}a=c.resolve(a).substr(1),b=c.resolve(b).substr(1);for(var e=d(a.split("/")),f=d(b.split("/")),g=Math.min(e.length,f.length),h=g,i=0;g>i;i++)if(e[i]!==f[i]){h=i;break}for(var j=[],i=h;i<e.length;i++)j.push("..");return j=j.concat(f.slice(h)),j.join("/")},c.sep="/",c.delimiter=":",c.dirname=function(a){var b=f(a),c=b[0],d=b[1];return c||d?(d&&(d=d.substr(0,d.length-1)),c+d):"."},c.basename=function(a,b){var c=f(a)[2];return b&&c.substr(-1*b.length)===b&&(c=c.substr(0,c.length-b.length)),c},c.extname=function(a){return f(a)[3]};var g="b"==="ab".substr(-1)?function(a,b,c){return a.substr(b,c)}:function(a,b,c){return 0>b&&(b=a.length+b),a.substr(b,c)}}).call(this,a("JkpR2F"))},{JkpR2F:12}],12:[function(a,b,c){function d(){}var e=b.exports={};e.nextTick=function(){var a="undefined"!=typeof window&&window.setImmediate,b="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(a)return function(a){return window.setImmediate(a)};if(b){var c=[];return window.addEventListener("message",function(a){var b=a.source;if((b===window||null===b)&&"process-tick"===a.data&&(a.stopPropagation(),c.length>0)){var d=c.shift();d()}},!0),function(a){c.push(a),window.postMessage("process-tick","*")}}return function(a){setTimeout(a,0)}}(),e.title="browser",e.browser=!0,e.env={},e.argv=[],e.on=d,e.addListener=d,e.once=d,e.off=d,e.removeListener=d,e.removeAllListeners=d,e.emit=d,e.binding=function(a){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(a){throw new Error("process.chdir is not supported")}},{}],13:[function(a,b,c){!function(a,c){"function"==typeof define&&define.amd?define([],c):"undefined"!=typeof b&&b.exports?b.exports=c():a.tv4=c()}(this,function(){function a(a){return encodeURI(a).replace(/%25[0-9][0-9]/g,function(a){return"%"+a.substring(3)})}function b(b){var c="";m[b.charAt(0)]&&(c=b.charAt(0),b=b.substring(1));var d="",e="",f=!0,g=!1,h=!1;"+"===c?f=!1:"."===c?(e=".",d="."):"/"===c?(e="/",d="/"):"#"===c?(e="#",f=!1):";"===c?(e=";",d=";",g=!0,h=!0):"?"===c?(e="?",d="&",g=!0):"&"===c&&(e="&",d="&",g=!0);for(var i=[],j=b.split(","),k=[],l={},o=0;o<j.length;o++){var p=j[o],q=null;if(-1!==p.indexOf(":")){var r=p.split(":");p=r[0],q=parseInt(r[1],10)}for(var s={};n[p.charAt(p.length-1)];)s[p.charAt(p.length-1)]=!0,p=p.substring(0,p.length-1);var t={truncate:q,name:p,suffices:s};k.push(t),l[p]=t,i.push(p)}var u=function(b){for(var c="",i=0,j=0;j<k.length;j++){var l=k[j],m=b(l.name);if(null===m||void 0===m||Array.isArray(m)&&0===m.length||"object"==typeof m&&0===Object.keys(m).length)i++;else if(c+=j===i?e:d||",",Array.isArray(m)){g&&(c+=l.name+"=");for(var n=0;n<m.length;n++)n>0&&(c+=l.suffices["*"]?d||",":",",l.suffices["*"]&&g&&(c+=l.name+"=")),c+=f?encodeURIComponent(m[n]).replace(/!/g,"%21"):a(m[n])}else if("object"==typeof m){g&&!l.suffices["*"]&&(c+=l.name+"=");var o=!0;for(var p in m)o||(c+=l.suffices["*"]?d||",":","),o=!1,c+=f?encodeURIComponent(p).replace(/!/g,"%21"):a(p),c+=l.suffices["*"]?"=":",",c+=f?encodeURIComponent(m[p]).replace(/!/g,"%21"):a(m[p])}else g&&(c+=l.name,h&&""===m||(c+="=")),null!=l.truncate&&(m=m.substring(0,l.truncate)),c+=f?encodeURIComponent(m).replace(/!/g,"%21"):a(m)}return c};return u.varNames=i,{prefix:e,substitution:u}}function c(a){if(!(this instanceof c))return new c(a);for(var d=a.split("{"),e=[d.shift()],f=[],g=[],h=[];d.length>0;){var i=d.shift(),j=i.split("}")[0],k=i.substring(j.length+1),l=b(j);g.push(l.substitution),f.push(l.prefix),e.push(k),h=h.concat(l.substitution.varNames)}this.fill=function(a){for(var b=e[0],c=0;c<g.length;c++){var d=g[c];b+=d(a),b+=e[c+1]}return b},this.varNames=h,this.template=a}function d(a,b){if(a===b)return!0;if(a&&b&&"object"==typeof a&&"object"==typeof b){if(Array.isArray(a)!==Array.isArray(b))return!1;if(Array.isArray(a)){if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(!d(a[c],b[c]))return!1}else{var e;for(e in a)if(void 0===b[e]&&void 0!==a[e])return!1;for(e in b)if(void 0===a[e]&&void 0!==b[e])return!1;for(e in a)if(!d(a[e],b[e]))return!1}return!0}return!1}function e(a){var b=String(a).replace(/^\s+|\s+$/g,"").match(/^([^:\/?#]+:)?(\/\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);return b?{href:b[0]||"",protocol:b[1]||"",authority:b[2]||"",host:b[3]||"",hostname:b[4]||"",port:b[5]||"",pathname:b[6]||"",search:b[7]||"",hash:b[8]||""}:null}function f(a,b){function c(a){var b=[];return a.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^\/]*/g,function(a){"/.."===a?b.pop():b.push(a)}),b.join("").replace(/^\//,"/"===a.charAt(0)?"/":"")}return b=e(b||""),a=e(a||""),b&&a?(b.protocol||a.protocol)+(b.protocol||b.authority?b.authority:a.authority)+c(b.protocol||b.authority||"/"===b.pathname.charAt(0)?b.pathname:b.pathname?(a.authority&&!a.pathname?"/":"")+a.pathname.slice(0,a.pathname.lastIndexOf("/")+1)+b.pathname:a.pathname)+(b.protocol||b.authority||b.pathname?b.search:b.search||a.search)+b.hash:null}function g(a){return a.split("#")[0]}function h(a,b){if(a&&"object"==typeof a)if(void 0===b?b=a.id:"string"==typeof a.id&&(b=f(b,a.id),a.id=b),Array.isArray(a))for(var c=0;c<a.length;c++)h(a[c],b);else{"string"==typeof a.$ref&&(a.$ref=f(b,a.$ref));for(var d in a)"enum"!==d&&h(a[d],b)}}function i(a){a=a||"en";var b=v[a];return function(a){var c=b[a.code]||u[a.code];if("string"!=typeof c)return"Unknown error code "+a.code+": "+JSON.stringify(a.messageParams);var d=a.params;return c.replace(/\{([^{}]*)\}/g,function(a,b){var c=d[b];return"string"==typeof c||"number"==typeof c?c:a})}}function j(a,b,c,d,e){if(Error.call(this),void 0===a)throw new Error("No error code supplied: "+d);this.message="",this.params=b,this.code=a,this.dataPath=c||"",this.schemaPath=d||"",this.subErrors=e||null;var f=new Error(this.message);if(this.stack=f.stack||f.stacktrace,!this.stack)try{throw f}catch(f){this.stack=f.stack||f.stacktrace}}function k(a,b){if(b.substring(0,a.length)===a){var c=b.substring(a.length);if(b.length>0&&"/"===b.charAt(a.length-1)||"#"===c.charAt(0)||"?"===c.charAt(0))return!0}return!1}function l(a){var b,c,d=new o,e={setErrorReporter:function(a){return"string"==typeof a?this.language(a):(c=a,!0)},addFormat:function(){d.addFormat.apply(d,arguments)},language:function(a){return a?(v[a]||(a=a.split("-")[0]),v[a]?(b=a,a):!1):b},addLanguage:function(a,b){var c;for(c in r)b[c]&&!b[r[c]]&&(b[r[c]]=b[c]);var d=a.split("-")[0];if(v[d]){v[a]=Object.create(v[d]);for(c in b)"undefined"==typeof v[d][c]&&(v[d][c]=b[c]),v[a][c]=b[c]}else v[a]=b,v[d]=b;return this},freshApi:function(a){var b=l();return a&&b.language(a),b},validate:function(a,e,f,g){var h=i(b),j=c?function(a,b,d){return c(a,b,d)||h(a,b,d)}:h,k=new o(d,!1,j,f,g);"string"==typeof e&&(e={$ref:e}),k.addSchema("",e);var l=k.validateAll(a,e,null,null,"");return!l&&g&&(l=k.banUnknownProperties(a,e)),this.error=l,this.missing=k.missing,this.valid=null===l,this.valid},validateResult:function(){var a={};return this.validate.apply(a,arguments),a},validateMultiple:function(a,e,f,g){var h=i(b),j=c?function(a,b,d){return c(a,b,d)||h(a,b,d)}:h,k=new o(d,!0,j,f,g);"string"==typeof e&&(e={$ref:e}),k.addSchema("",e),k.validateAll(a,e,null,null,""),g&&k.banUnknownProperties(a,e);var l={};return l.errors=k.errors,l.missing=k.missing,l.valid=0===l.errors.length,l},addSchema:function(){return d.addSchema.apply(d,arguments)},getSchema:function(){return d.getSchema.apply(d,arguments)},getSchemaMap:function(){return d.getSchemaMap.apply(d,arguments)},getSchemaUris:function(){return d.getSchemaUris.apply(d,arguments)},getMissingUris:function(){return d.getMissingUris.apply(d,arguments)},dropSchemas:function(){d.dropSchemas.apply(d,arguments)},defineKeyword:function(){d.defineKeyword.apply(d,arguments)},defineError:function(a,b,c){if("string"!=typeof a||!/^[A-Z]+(_[A-Z]+)*$/.test(a))throw new Error("Code name must be a string in UPPER_CASE_WITH_UNDERSCORES");if("number"!=typeof b||b%1!==0||1e4>b)throw new Error("Code number must be an integer > 10000");if("undefined"!=typeof r[a])throw new Error("Error already defined: "+a+" as "+r[a]);if("undefined"!=typeof s[b])throw new Error("Error code already used: "+s[b]+" as "+b);r[a]=b,s[b]=a,u[a]=u[b]=c;for(var d in v){var e=v[d];e[a]&&(e[b]=e[b]||e[a])}},reset:function(){d.reset(),this.error=null,this.missing=[],this.valid=!0},missing:[],error:null,valid:!0,normSchema:h,resolveUrl:f,getDocumentUri:g,errorCodes:r};return e.language(a||"en"),e}Object.keys||(Object.keys=function(){var a=Object.prototype.hasOwnProperty,b=!{
toString:null}.propertyIsEnumerable("toString"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=c.length;return function(e){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("Object.keys called on non-object");var f=[];for(var g in e)a.call(e,g)&&f.push(g);if(b)for(var h=0;d>h;h++)a.call(e,c[h])&&f.push(c[h]);return f}}()),Object.create||(Object.create=function(){function a(){}return function(b){if(1!==arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return a.prototype=b,new a}}()),Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a){if(null===this)throw new TypeError;var b=Object(this),c=b.length>>>0;if(0===c)return-1;var d=0;if(arguments.length>1&&(d=Number(arguments[1]),d!==d?d=0:0!==d&&d!==1/0&&d!==-(1/0)&&(d=(d>0||-1)*Math.floor(Math.abs(d)))),d>=c)return-1;for(var e=d>=0?d:Math.max(c-Math.abs(d),0);c>e;e++)if(e in b&&b[e]===a)return e;return-1}),Object.isFrozen||(Object.isFrozen=function(a){for(var b="tv4_test_frozen_key";a.hasOwnProperty(b);)b+=Math.random();try{return a[b]=!0,delete a[b],!1}catch(c){return!0}});var m={"+":!0,"#":!0,".":!0,"/":!0,";":!0,"?":!0,"&":!0},n={"*":!0};c.prototype={toString:function(){return this.template},fillFromObject:function(a){return this.fill(function(b){return a[b]})}};var o=function(a,b,c,d,e){if(this.missing=[],this.missingMap={},this.formatValidators=a?Object.create(a.formatValidators):{},this.schemas=a?Object.create(a.schemas):{},this.collectMultiple=b,this.errors=[],this.handleError=b?this.collectError:this.returnError,d&&(this.checkRecursive=!0,this.scanned=[],this.scannedFrozen=[],this.scannedFrozenSchemas=[],this.scannedFrozenValidationErrors=[],this.validatedSchemasKey="tv4_validation_id",this.validationErrorsKey="tv4_validation_errors_id"),e&&(this.trackUnknownProperties=!0,this.knownPropertyPaths={},this.unknownPropertyPaths={}),this.errorReporter=c||i("en"),"string"==typeof this.errorReporter)throw new Error("debug");if(this.definedKeywords={},a)for(var f in a.definedKeywords)this.definedKeywords[f]=a.definedKeywords[f].slice(0)};o.prototype.defineKeyword=function(a,b){this.definedKeywords[a]=this.definedKeywords[a]||[],this.definedKeywords[a].push(b)},o.prototype.createError=function(a,b,c,d,e,f,g){var h=new j(a,b,c,d,e);return h.message=this.errorReporter(h,f,g),h},o.prototype.returnError=function(a){return a},o.prototype.collectError=function(a){return a&&this.errors.push(a),null},o.prototype.prefixErrors=function(a,b,c){for(var d=a;d<this.errors.length;d++)this.errors[d]=this.errors[d].prefixWith(b,c);return this},o.prototype.banUnknownProperties=function(a,b){for(var c in this.unknownPropertyPaths){var d=this.createError(r.UNKNOWN_PROPERTY,{path:c},c,"",null,a,b),e=this.handleError(d);if(e)return e}return null},o.prototype.addFormat=function(a,b){if("object"==typeof a){for(var c in a)this.addFormat(c,a[c]);return this}this.formatValidators[a]=b},o.prototype.resolveRefs=function(a,b){if(void 0!==a.$ref){if(b=b||{},b[a.$ref])return this.createError(r.CIRCULAR_REFERENCE,{urls:Object.keys(b).join(", ")},"","",null,void 0,a);b[a.$ref]=!0,a=this.getSchema(a.$ref,b)}return a},o.prototype.getSchema=function(a,b){var c;if(void 0!==this.schemas[a])return c=this.schemas[a],this.resolveRefs(c,b);var d=a,e="";if(-1!==a.indexOf("#")&&(e=a.substring(a.indexOf("#")+1),d=a.substring(0,a.indexOf("#"))),"object"==typeof this.schemas[d]){c=this.schemas[d];var f=decodeURIComponent(e);if(""===f)return this.resolveRefs(c,b);if("/"!==f.charAt(0))return void 0;for(var g=f.split("/").slice(1),h=0;h<g.length;h++){var i=g[h].replace(/~1/g,"/").replace(/~0/g,"~");if(void 0===c[i]){c=void 0;break}c=c[i]}if(void 0!==c)return this.resolveRefs(c,b)}void 0===this.missing[d]&&(this.missing.push(d),this.missing[d]=d,this.missingMap[d]=d)},o.prototype.searchSchemas=function(a,b){if(Array.isArray(a))for(var c=0;c<a.length;c++)this.searchSchemas(a[c],b);else if(a&&"object"==typeof a){"string"==typeof a.id&&k(b,a.id)&&void 0===this.schemas[a.id]&&(this.schemas[a.id]=a);for(var d in a)if("enum"!==d)if("object"==typeof a[d])this.searchSchemas(a[d],b);else if("$ref"===d){var e=g(a[d]);e&&void 0===this.schemas[e]&&void 0===this.missingMap[e]&&(this.missingMap[e]=e)}}},o.prototype.addSchema=function(a,b){if("string"!=typeof a||"undefined"==typeof b){if("object"!=typeof a||"string"!=typeof a.id)return;b=a,a=b.id}a===g(a)+"#"&&(a=g(a)),this.schemas[a]=b,delete this.missingMap[a],h(b,a),this.searchSchemas(b,a)},o.prototype.getSchemaMap=function(){var a={};for(var b in this.schemas)a[b]=this.schemas[b];return a},o.prototype.getSchemaUris=function(a){var b=[];for(var c in this.schemas)(!a||a.test(c))&&b.push(c);return b},o.prototype.getMissingUris=function(a){var b=[];for(var c in this.missingMap)(!a||a.test(c))&&b.push(c);return b},o.prototype.dropSchemas=function(){this.schemas={},this.reset()},o.prototype.reset=function(){this.missing=[],this.missingMap={},this.errors=[]},o.prototype.validateAll=function(a,b,c,d,e){var f;if(b=this.resolveRefs(b),!b)return null;if(b instanceof j)return this.errors.push(b),b;var g,h=this.errors.length,i=null,k=null;if(this.checkRecursive&&a&&"object"==typeof a){if(f=!this.scanned.length,a[this.validatedSchemasKey]){var l=a[this.validatedSchemasKey].indexOf(b);if(-1!==l)return this.errors=this.errors.concat(a[this.validationErrorsKey][l]),null}if(Object.isFrozen(a)&&(g=this.scannedFrozen.indexOf(a),-1!==g)){var m=this.scannedFrozenSchemas[g].indexOf(b);if(-1!==m)return this.errors=this.errors.concat(this.scannedFrozenValidationErrors[g][m]),null}if(this.scanned.push(a),Object.isFrozen(a))-1===g&&(g=this.scannedFrozen.length,this.scannedFrozen.push(a),this.scannedFrozenSchemas.push([])),i=this.scannedFrozenSchemas[g].length,this.scannedFrozenSchemas[g][i]=b,this.scannedFrozenValidationErrors[g][i]=[];else{if(!a[this.validatedSchemasKey])try{Object.defineProperty(a,this.validatedSchemasKey,{value:[],configurable:!0}),Object.defineProperty(a,this.validationErrorsKey,{value:[],configurable:!0})}catch(n){a[this.validatedSchemasKey]=[],a[this.validationErrorsKey]=[]}k=a[this.validatedSchemasKey].length,a[this.validatedSchemasKey][k]=b,a[this.validationErrorsKey][k]=[]}}var o=this.errors.length,p=this.validateBasic(a,b,e)||this.validateNumeric(a,b,e)||this.validateString(a,b,e)||this.validateArray(a,b,e)||this.validateObject(a,b,e)||this.validateCombinations(a,b,e)||this.validateHypermedia(a,b,e)||this.validateFormat(a,b,e)||this.validateDefinedKeywords(a,b,e)||null;if(f){for(;this.scanned.length;){var q=this.scanned.pop();delete q[this.validatedSchemasKey]}this.scannedFrozen=[],this.scannedFrozenSchemas=[]}if(p||o!==this.errors.length)for(;c&&c.length||d&&d.length;){var r=c&&c.length?""+c.pop():null,s=d&&d.length?""+d.pop():null;p&&(p=p.prefixWith(r,s)),this.prefixErrors(o,r,s)}return null!==i?this.scannedFrozenValidationErrors[g][i]=this.errors.slice(h):null!==k&&(a[this.validationErrorsKey][k]=this.errors.slice(h)),this.handleError(p)},o.prototype.validateFormat=function(a,b){if("string"!=typeof b.format||!this.formatValidators[b.format])return null;var c=this.formatValidators[b.format].call(null,a,b);return"string"==typeof c||"number"==typeof c?this.createError(r.FORMAT_CUSTOM,{message:c},"","/format",null,a,b):c&&"object"==typeof c?this.createError(r.FORMAT_CUSTOM,{message:c.message||"?"},c.dataPath||"",c.schemaPath||"/format",null,a,b):null},o.prototype.validateDefinedKeywords=function(a,b,c){for(var d in this.definedKeywords)if("undefined"!=typeof b[d])for(var e=this.definedKeywords[d],f=0;f<e.length;f++){var g=e[f],h=g(a,b[d],b,c);if("string"==typeof h||"number"==typeof h)return this.createError(r.KEYWORD_CUSTOM,{key:d,message:h},"","",null,a,b).prefixWith(null,d);if(h&&"object"==typeof h){var i=h.code;if("string"==typeof i){if(!r[i])throw new Error("Undefined error code (use defineError): "+i);i=r[i]}else"number"!=typeof i&&(i=r.KEYWORD_CUSTOM);var j="object"==typeof h.message?h.message:{key:d,message:h.message||"?"},k=h.schemaPath||"/"+d.replace(/~/g,"~0").replace(/\//g,"~1");return this.createError(i,j,h.dataPath||null,k,null,a,b)}}return null},o.prototype.validateBasic=function(a,b,c){var d;return(d=this.validateType(a,b,c))?d.prefixWith(null,"type"):(d=this.validateEnum(a,b,c))?d.prefixWith(null,"type"):null},o.prototype.validateType=function(a,b){if(void 0===b.type)return null;var c=typeof a;null===a?c="null":Array.isArray(a)&&(c="array");var d=b.type;Array.isArray(d)||(d=[d]);for(var e=0;e<d.length;e++){var f=d[e];if(f===c||"integer"===f&&"number"===c&&a%1===0)return null}return this.createError(r.INVALID_TYPE,{type:c,expected:d.join("/")},"","",null,a,b)},o.prototype.validateEnum=function(a,b){if(void 0===b["enum"])return null;for(var c=0;c<b["enum"].length;c++){var e=b["enum"][c];if(d(a,e))return null}return this.createError(r.ENUM_MISMATCH,{value:"undefined"!=typeof JSON?JSON.stringify(a):a},"","",null,a,b)},o.prototype.validateNumeric=function(a,b,c){return this.validateMultipleOf(a,b,c)||this.validateMinMax(a,b,c)||this.validateNaN(a,b,c)||null};var p=Math.pow(2,-51),q=1-p;o.prototype.validateMultipleOf=function(a,b){var c=b.multipleOf||b.divisibleBy;if(void 0===c)return null;if("number"==typeof a){var d=a/c%1;if(d>=p&&q>d)return this.createError(r.NUMBER_MULTIPLE_OF,{value:a,multipleOf:c},"","",null,a,b)}return null},o.prototype.validateMinMax=function(a,b){if("number"!=typeof a)return null;if(void 0!==b.minimum){if(a<b.minimum)return this.createError(r.NUMBER_MINIMUM,{value:a,minimum:b.minimum},"","/minimum",null,a,b);if(b.exclusiveMinimum&&a===b.minimum)return this.createError(r.NUMBER_MINIMUM_EXCLUSIVE,{value:a,minimum:b.minimum},"","/exclusiveMinimum",null,a,b)}if(void 0!==b.maximum){if(a>b.maximum)return this.createError(r.NUMBER_MAXIMUM,{value:a,maximum:b.maximum},"","/maximum",null,a,b);if(b.exclusiveMaximum&&a===b.maximum)return this.createError(r.NUMBER_MAXIMUM_EXCLUSIVE,{value:a,maximum:b.maximum},"","/exclusiveMaximum",null,a,b)}return null},o.prototype.validateNaN=function(a,b){return"number"!=typeof a?null:isNaN(a)===!0||a===1/0||a===-(1/0)?this.createError(r.NUMBER_NOT_A_NUMBER,{value:a},"","/type",null,a,b):null},o.prototype.validateString=function(a,b,c){return this.validateStringLength(a,b,c)||this.validateStringPattern(a,b,c)||null},o.prototype.validateStringLength=function(a,b){return"string"!=typeof a?null:void 0!==b.minLength&&a.length<b.minLength?this.createError(r.STRING_LENGTH_SHORT,{length:a.length,minimum:b.minLength},"","/minLength",null,a,b):void 0!==b.maxLength&&a.length>b.maxLength?this.createError(r.STRING_LENGTH_LONG,{length:a.length,maximum:b.maxLength},"","/maxLength",null,a,b):null},o.prototype.validateStringPattern=function(a,b){if("string"!=typeof a||"string"!=typeof b.pattern&&!(b.pattern instanceof RegExp))return null;var c;if(b.pattern instanceof RegExp)c=b.pattern;else{var d,e="",f=b.pattern.match(/^\/(.+)\/([img]*)$/);f?(d=f[1],e=f[2]):d=b.pattern,c=new RegExp(d,e)}return c.test(a)?null:this.createError(r.STRING_PATTERN,{pattern:b.pattern},"","/pattern",null,a,b)},o.prototype.validateArray=function(a,b,c){return Array.isArray(a)?this.validateArrayLength(a,b,c)||this.validateArrayUniqueItems(a,b,c)||this.validateArrayItems(a,b,c)||null:null},o.prototype.validateArrayLength=function(a,b){var c;return void 0!==b.minItems&&a.length<b.minItems&&(c=this.createError(r.ARRAY_LENGTH_SHORT,{length:a.length,minimum:b.minItems},"","/minItems",null,a,b),this.handleError(c))?c:void 0!==b.maxItems&&a.length>b.maxItems&&(c=this.createError(r.ARRAY_LENGTH_LONG,{length:a.length,maximum:b.maxItems},"","/maxItems",null,a,b),this.handleError(c))?c:null},o.prototype.validateArrayUniqueItems=function(a,b){if(b.uniqueItems)for(var c=0;c<a.length;c++)for(var e=c+1;e<a.length;e++)if(d(a[c],a[e])){var f=this.createError(r.ARRAY_UNIQUE,{match1:c,match2:e},"","/uniqueItems",null,a,b);if(this.handleError(f))return f}return null},o.prototype.validateArrayItems=function(a,b,c){if(void 0===b.items)return null;var d,e;if(Array.isArray(b.items)){for(e=0;e<a.length;e++)if(e<b.items.length){if(d=this.validateAll(a[e],b.items[e],[e],["items",e],c+"/"+e))return d}else if(void 0!==b.additionalItems)if("boolean"==typeof b.additionalItems){if(!b.additionalItems&&(d=this.createError(r.ARRAY_ADDITIONAL_ITEMS,{},"/"+e,"/additionalItems",null,a,b),this.handleError(d)))return d}else if(d=this.validateAll(a[e],b.additionalItems,[e],["additionalItems"],c+"/"+e))return d}else for(e=0;e<a.length;e++)if(d=this.validateAll(a[e],b.items,[e],["items"],c+"/"+e))return d;return null},o.prototype.validateObject=function(a,b,c){return"object"!=typeof a||null===a||Array.isArray(a)?null:this.validateObjectMinMaxProperties(a,b,c)||this.validateObjectRequiredProperties(a,b,c)||this.validateObjectProperties(a,b,c)||this.validateObjectDependencies(a,b,c)||null},o.prototype.validateObjectMinMaxProperties=function(a,b){var c,d=Object.keys(a);return void 0!==b.minProperties&&d.length<b.minProperties&&(c=this.createError(r.OBJECT_PROPERTIES_MINIMUM,{propertyCount:d.length,minimum:b.minProperties},"","/minProperties",null,a,b),this.handleError(c))?c:void 0!==b.maxProperties&&d.length>b.maxProperties&&(c=this.createError(r.OBJECT_PROPERTIES_MAXIMUM,{propertyCount:d.length,maximum:b.maxProperties},"","/maxProperties",null,a,b),this.handleError(c))?c:null},o.prototype.validateObjectRequiredProperties=function(a,b){if(void 0!==b.required)for(var c=0;c<b.required.length;c++){var d=b.required[c];if(void 0===a[d]){var e=this.createError(r.OBJECT_REQUIRED,{key:d},"","/required/"+c,null,a,b);if(this.handleError(e))return e}}return null},o.prototype.validateObjectProperties=function(a,b,c){var d;for(var e in a){var f=c+"/"+e.replace(/~/g,"~0").replace(/\//g,"~1"),g=!1;if(void 0!==b.properties&&void 0!==b.properties[e]&&(g=!0,d=this.validateAll(a[e],b.properties[e],[e],["properties",e],f)))return d;if(void 0!==b.patternProperties)for(var h in b.patternProperties){var i=new RegExp(h);if(i.test(e)&&(g=!0,d=this.validateAll(a[e],b.patternProperties[h],[e],["patternProperties",h],f)))return d}if(g)this.trackUnknownProperties&&(this.knownPropertyPaths[f]=!0,delete this.unknownPropertyPaths[f]);else if(void 0!==b.additionalProperties){if(this.trackUnknownProperties&&(this.knownPropertyPaths[f]=!0,delete this.unknownPropertyPaths[f]),"boolean"==typeof b.additionalProperties){if(!b.additionalProperties&&(d=this.createError(r.OBJECT_ADDITIONAL_PROPERTIES,{key:e},"","/additionalProperties",null,a,b).prefixWith(e,null),this.handleError(d)))return d}else if(d=this.validateAll(a[e],b.additionalProperties,[e],["additionalProperties"],f))return d}else this.trackUnknownProperties&&!this.knownPropertyPaths[f]&&(this.unknownPropertyPaths[f]=!0)}return null},o.prototype.validateObjectDependencies=function(a,b,c){var d;if(void 0!==b.dependencies)for(var e in b.dependencies)if(void 0!==a[e]){var f=b.dependencies[e];if("string"==typeof f){if(void 0===a[f]&&(d=this.createError(r.OBJECT_DEPENDENCY_KEY,{key:e,missing:f},"","",null,a,b).prefixWith(null,e).prefixWith(null,"dependencies"),this.handleError(d)))return d}else if(Array.isArray(f))for(var g=0;g<f.length;g++){var h=f[g];if(void 0===a[h]&&(d=this.createError(r.OBJECT_DEPENDENCY_KEY,{key:e,missing:h},"","/"+g,null,a,b).prefixWith(null,e).prefixWith(null,"dependencies"),this.handleError(d)))return d}else if(d=this.validateAll(a,f,[],["dependencies",e],c))return d}return null},o.prototype.validateCombinations=function(a,b,c){return this.validateAllOf(a,b,c)||this.validateAnyOf(a,b,c)||this.validateOneOf(a,b,c)||this.validateNot(a,b,c)||null},o.prototype.validateAllOf=function(a,b,c){if(void 0===b.allOf)return null;for(var d,e=0;e<b.allOf.length;e++){var f=b.allOf[e];if(d=this.validateAll(a,f,[],["allOf",e],c))return d}return null},o.prototype.validateAnyOf=function(a,b,c){if(void 0===b.anyOf)return null;var d,e,f=[],g=this.errors.length;this.trackUnknownProperties&&(d=this.unknownPropertyPaths,e=this.knownPropertyPaths);for(var h=!0,i=0;i<b.anyOf.length;i++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var j=b.anyOf[i],k=this.errors.length,l=this.validateAll(a,j,[],["anyOf",i],c);if(null===l&&k===this.errors.length){if(this.errors=this.errors.slice(0,g),this.trackUnknownProperties){for(var m in this.knownPropertyPaths)e[m]=!0,delete d[m];for(var n in this.unknownPropertyPaths)e[n]||(d[n]=!0);h=!1;continue}return null}l&&f.push(l.prefixWith(null,""+i).prefixWith(null,"anyOf"))}return this.trackUnknownProperties&&(this.unknownPropertyPaths=d,this.knownPropertyPaths=e),h?(f=f.concat(this.errors.slice(g)),this.errors=this.errors.slice(0,g),this.createError(r.ANY_OF_MISSING,{},"","/anyOf",f,a,b)):void 0},o.prototype.validateOneOf=function(a,b,c){if(void 0===b.oneOf)return null;var d,e,f=null,g=[],h=this.errors.length;this.trackUnknownProperties&&(d=this.unknownPropertyPaths,e=this.knownPropertyPaths);for(var i=0;i<b.oneOf.length;i++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var j=b.oneOf[i],k=this.errors.length,l=this.validateAll(a,j,[],["oneOf",i],c);if(null===l&&k===this.errors.length){if(null!==f)return this.errors=this.errors.slice(0,h),this.createError(r.ONE_OF_MULTIPLE,{index1:f,index2:i},"","/oneOf",null,a,b);if(f=i,this.trackUnknownProperties){for(var m in this.knownPropertyPaths)e[m]=!0,delete d[m];for(var n in this.unknownPropertyPaths)e[n]||(d[n]=!0)}}else l&&g.push(l)}return this.trackUnknownProperties&&(this.unknownPropertyPaths=d,this.knownPropertyPaths=e),null===f?(g=g.concat(this.errors.slice(h)),this.errors=this.errors.slice(0,h),this.createError(r.ONE_OF_MISSING,{},"","/oneOf",g,a,b)):(this.errors=this.errors.slice(0,h),null)},o.prototype.validateNot=function(a,b,c){if(void 0===b.not)return null;var d,e,f=this.errors.length;this.trackUnknownProperties&&(d=this.unknownPropertyPaths,e=this.knownPropertyPaths,this.unknownPropertyPaths={},this.knownPropertyPaths={});var g=this.validateAll(a,b.not,null,null,c),h=this.errors.slice(f);return this.errors=this.errors.slice(0,f),this.trackUnknownProperties&&(this.unknownPropertyPaths=d,this.knownPropertyPaths=e),null===g&&0===h.length?this.createError(r.NOT_PASSED,{},"","/not",null,a,b):null},o.prototype.validateHypermedia=function(a,b,d){if(!b.links)return null;for(var e,f=0;f<b.links.length;f++){var g=b.links[f];if("describedby"===g.rel){for(var h=new c(g.href),i=!0,j=0;j<h.varNames.length;j++)if(!(h.varNames[j]in a)){i=!1;break}if(i){var k=h.fillFromObject(a),l={$ref:k};if(e=this.validateAll(a,l,[],["links",f],d))return e}}}};var r={INVALID_TYPE:0,ENUM_MISMATCH:1,ANY_OF_MISSING:10,ONE_OF_MISSING:11,ONE_OF_MULTIPLE:12,NOT_PASSED:13,NUMBER_MULTIPLE_OF:100,NUMBER_MINIMUM:101,NUMBER_MINIMUM_EXCLUSIVE:102,NUMBER_MAXIMUM:103,NUMBER_MAXIMUM_EXCLUSIVE:104,NUMBER_NOT_A_NUMBER:105,STRING_LENGTH_SHORT:200,STRING_LENGTH_LONG:201,STRING_PATTERN:202,OBJECT_PROPERTIES_MINIMUM:300,OBJECT_PROPERTIES_MAXIMUM:301,OBJECT_REQUIRED:302,OBJECT_ADDITIONAL_PROPERTIES:303,OBJECT_DEPENDENCY_KEY:304,ARRAY_LENGTH_SHORT:400,ARRAY_LENGTH_LONG:401,ARRAY_UNIQUE:402,ARRAY_ADDITIONAL_ITEMS:403,FORMAT_CUSTOM:500,KEYWORD_CUSTOM:501,CIRCULAR_REFERENCE:600,UNKNOWN_PROPERTY:1e3},s={};for(var t in r)s[r[t]]=t;var u={INVALID_TYPE:"Invalid type: {type} (expected {expected})",ENUM_MISMATCH:"No enum match for: {value}",ANY_OF_MISSING:'Data does not match any schemas from "anyOf"',ONE_OF_MISSING:'Data does not match any schemas from "oneOf"',ONE_OF_MULTIPLE:'Data is valid against more than one schema from "oneOf": indices {index1} and {index2}',NOT_PASSED:'Data matches schema from "not"',NUMBER_MULTIPLE_OF:"Value {value} is not a multiple of {multipleOf}",NUMBER_MINIMUM:"Value {value} is less than minimum {minimum}",NUMBER_MINIMUM_EXCLUSIVE:"Value {value} is equal to exclusive minimum {minimum}",NUMBER_MAXIMUM:"Value {value} is greater than maximum {maximum}",NUMBER_MAXIMUM_EXCLUSIVE:"Value {value} is equal to exclusive maximum {maximum}",NUMBER_NOT_A_NUMBER:"Value {value} is not a valid number",STRING_LENGTH_SHORT:"String is too short ({length} chars), minimum {minimum}",STRING_LENGTH_LONG:"String is too long ({length} chars), maximum {maximum}",STRING_PATTERN:"String does not match pattern: {pattern}",OBJECT_PROPERTIES_MINIMUM:"Too few properties defined ({propertyCount}), minimum {minimum}",OBJECT_PROPERTIES_MAXIMUM:"Too many properties defined ({propertyCount}), maximum {maximum}",OBJECT_REQUIRED:"Missing required property: {key}",OBJECT_ADDITIONAL_PROPERTIES:"Additional properties not allowed",OBJECT_DEPENDENCY_KEY:"Dependency failed - key must exist: {missing} (due to key: {key})",ARRAY_LENGTH_SHORT:"Array is too short ({length}), minimum {minimum}",ARRAY_LENGTH_LONG:"Array is too long ({length}), maximum {maximum}",ARRAY_UNIQUE:"Array items are not unique (indices {match1} and {match2})",ARRAY_ADDITIONAL_ITEMS:"Additional items not allowed",FORMAT_CUSTOM:"Format validation failed ({message})",KEYWORD_CUSTOM:"Keyword failed: {key} ({message})",CIRCULAR_REFERENCE:"Circular $refs: {urls}",UNKNOWN_PROPERTY:"Unknown property (not in schema)"};j.prototype=Object.create(Error.prototype),j.prototype.constructor=j,j.prototype.name="ValidationError",j.prototype.prefixWith=function(a,b){if(null!==a&&(a=a.replace(/~/g,"~0").replace(/\//g,"~1"),this.dataPath="/"+a+this.dataPath),null!==b&&(b=b.replace(/~/g,"~0").replace(/\//g,"~1"),this.schemaPath="/"+b+this.schemaPath),null!==this.subErrors)for(var c=0;c<this.subErrors.length;c++)this.subErrors[c].prefixWith(a,b);return this};var v={},w=l();return w.addLanguage("en-gb",u),w.tv4=w,w})},{}]},{},[6]);